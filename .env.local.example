# Copy this file to .env.local and fill in your Firebase web config
## Values prefixed with NEXT_PUBLIC_ are exposed to the browser (Firebase Web SDK expects these)

NEXT_PUBLIC_apiKey=
NEXT_PUBLIC_authDomain=ragestate-app.firebaseapp.com
NEXT_PUBLIC_databaseURL=https://ragestate-app-default-rtdb.firebaseio.com/
NEXT_PUBLIC_projectId=ragestate-app
NEXT_PUBLIC_storageBucket=ragestate-app.appspot.com
NEXT_PUBLIC_messagingSenderId=
NEXT_PUBLIC_appId=
NEXT_PUBLIC_measurementId=

# Web Push (Firebase Cloud Messaging) VAPID key
# Generate in Firebase Console > Cloud Messaging > Web configuration (use Key Pair)
NEXT_PUBLIC_FIREBASE_VAPID_KEY=

# Optional aliases (supported by code as fallbacks)
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_DATABASE_URL=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=

# Stripe function proxy (server-side)
# Prefer the direct Cloud Run URL of your v2 function (no trailing slash)
# Example: https://stripepayment-abc123-uc.a.run.app
STRIPE_FN_URL=

# Optional fallback configuration if STRIPE_FN_URL is not set
# If not provided, the proxy will attempt to infer from .firebaserc
# and build: https://<region>-<projectId>.cloudfunctions.net/stripePayment
STRIPE_FN_REGION=us-central1
STRIPE_FIREBASE_PROJECT_ID=

# Server-only shared key between Next.js proxy and Functions (optional but recommended)
# Set the same value here (Next) and in Firebase Secret Manager as PROXY_KEY
PROXY_KEY=

# Stripe keys (server-side). NEVER prefix secret keys with NEXT_PUBLIC_.
# Provide only the publishable key to the client (e.g. via process.env at build or an API route if needed).
STRIPE_TEST_PUBLISHABLE_KEY=
STRIPE_TEST_SECRET_KEY=
STRIPE_LIVE_SECRET_KEY=

# Notifications feature notes:
# 1. Service worker must exist at public/firebase-messaging-sw.js
# 2. After enabling notifications, device docs appear under users/{uid}/devices/* with provider=fcm
# 3. Preferences + quiet hours stored at users/{uid}/settings/notificationPrefs
# 4. Unread counter stored on users/{uid}.unreadNotifications
# 5. Batch mark-read callable: batchMarkNotificationsRead (v2 onCall)

# =============================================================================
# Cloud Functions Secrets (DO NOT SET AS ENV VARS)
# =============================================================================
# These are managed via Firebase Secret Manager, NOT environment variables.
# Set them with: firebase functions:secrets:set <SECRET_NAME>
#
# STRIPE_SECRET           - Stripe secret key (sk_live_... or sk_test_...)
# RESEND_API_KEY          - Resend API key for transactional emails (or SES)
# PRINTIFY_API_TOKEN      - Printify Personal Access Token
# PRINTIFY_SHOP_ID        - Printify Shop ID (from /v1/shops.json)
# PRINTIFY_WEBHOOK_SECRET - Secret for validating Printify webhook signatures
# PROXY_KEY               - Same as above, for Functions to verify incoming requests

# =============================================================================
# Local Development
# =============================================================================
# 1. Run Functions Emulator:
#    export PROXY_KEY=dev-proxy
#    export STRIPE_SECRET=sk_test_...
#    npm --prefix functions run serve
#
# 2. Run Next.js pointing to emulator:
#    PROXY_KEY=dev-proxy \
#    STRIPE_FN_URL=http://127.0.0.1:5001/ragestate-app/us-central1/stripePayment \
#    npm run dev
#
# 3. Or use the VS Code task "Dev: All" which runs both together.

